"use strict";(globalThis.webpackChunkkubepolaris_docs=globalThis.webpackChunkkubepolaris_docs||[]).push([[864],{7969(e,n,s){s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>a,default:()=>o,frontMatter:()=>r,metadata:()=>i,toc:()=>t});const i=JSON.parse('{"id":"api/authentication","title":"\u8ba4\u8bc1 API","description":"\u767b\u5f55","source":"@site/docs/api/authentication.md","sourceDirName":"api","slug":"/api/authentication","permalink":"/docs/api/authentication","draft":false,"unlisted":false,"editUrl":"https://github.com/clay-wangzhi/KubePolaris/tree/main/website/docs/api/authentication.md","tags":[],"version":"current","lastUpdatedBy":"clay-wangzhi","lastUpdatedAt":1768450541000,"sidebarPosition":2,"frontMatter":{"sidebar_position":2},"sidebar":"docsSidebar","previous":{"title":"API \u6982\u8ff0","permalink":"/docs/api/overview"},"next":{"title":"\u96c6\u7fa4 API","permalink":"/docs/api/clusters"}}');var d=s(4848),l=s(8453);const r={sidebar_position:2},a="\u8ba4\u8bc1 API",c={},t=[{value:"\u767b\u5f55",id:"\u767b\u5f55",level:2},{value:"\u8bf7\u6c42",id:"\u8bf7\u6c42",level:3},{value:"\u53c2\u6570",id:"\u53c2\u6570",level:3},{value:"\u793a\u4f8b",id:"\u793a\u4f8b",level:3},{value:"\u54cd\u5e94",id:"\u54cd\u5e94",level:3},{value:"\u767b\u51fa",id:"\u767b\u51fa",level:2},{value:"\u8bf7\u6c42",id:"\u8bf7\u6c42-1",level:3},{value:"\u793a\u4f8b",id:"\u793a\u4f8b-1",level:3},{value:"\u54cd\u5e94",id:"\u54cd\u5e94-1",level:3},{value:"\u5237\u65b0 Token",id:"\u5237\u65b0-token",level:2},{value:"\u8bf7\u6c42",id:"\u8bf7\u6c42-2",level:3},{value:"\u793a\u4f8b",id:"\u793a\u4f8b-2",level:3},{value:"\u54cd\u5e94",id:"\u54cd\u5e94-2",level:3},{value:"\u5f53\u524d\u7528\u6237\u4fe1\u606f",id:"\u5f53\u524d\u7528\u6237\u4fe1\u606f",level:2},{value:"\u8bf7\u6c42",id:"\u8bf7\u6c42-3",level:3},{value:"\u793a\u4f8b",id:"\u793a\u4f8b-3",level:3},{value:"\u54cd\u5e94",id:"\u54cd\u5e94-3",level:3},{value:"\u4fee\u6539\u5bc6\u7801",id:"\u4fee\u6539\u5bc6\u7801",level:2},{value:"\u8bf7\u6c42",id:"\u8bf7\u6c42-4",level:3},{value:"\u53c2\u6570",id:"\u53c2\u6570-1",level:3},{value:"\u793a\u4f8b",id:"\u793a\u4f8b-4",level:3},{value:"\u54cd\u5e94",id:"\u54cd\u5e94-4",level:3},{value:"\u9519\u8bef\u7801",id:"\u9519\u8bef\u7801",level:2}];function h(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,l.R)(),...e.components};return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(n.header,{children:(0,d.jsx)(n.h1,{id:"\u8ba4\u8bc1-api",children:"\u8ba4\u8bc1 API"})}),"\n",(0,d.jsx)(n.h2,{id:"\u767b\u5f55",children:"\u767b\u5f55"}),"\n",(0,d.jsx)(n.h3,{id:"\u8bf7\u6c42",children:"\u8bf7\u6c42"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{children:"POST /api/auth/login\n"})}),"\n",(0,d.jsx)(n.h3,{id:"\u53c2\u6570",children:"\u53c2\u6570"}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"\u5b57\u6bb5"}),(0,d.jsx)(n.th,{children:"\u7c7b\u578b"}),(0,d.jsx)(n.th,{children:"\u5fc5\u586b"}),(0,d.jsx)(n.th,{children:"\u8bf4\u660e"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"username"}),(0,d.jsx)(n.td,{children:"string"}),(0,d.jsx)(n.td,{children:"\u662f"}),(0,d.jsx)(n.td,{children:"\u7528\u6237\u540d"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"password"}),(0,d.jsx)(n.td,{children:"string"}),(0,d.jsx)(n.td,{children:"\u662f"}),(0,d.jsx)(n.td,{children:"\u5bc6\u7801"})]})]})]}),"\n",(0,d.jsx)(n.h3,{id:"\u793a\u4f8b",children:"\u793a\u4f8b"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-bash",children:'curl -X POST https://kubepolaris.example.com/api/auth/login \\\n  -H "Content-Type: application/json" \\\n  -d \'{\n    "username": "admin",\n    "password": "admin123"\n  }\'\n'})}),"\n",(0,d.jsx)(n.h3,{id:"\u54cd\u5e94",children:"\u54cd\u5e94"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-json",children:'{\n  "code": 200,\n  "message": "success",\n  "data": {\n    "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",\n    "refreshToken": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",\n    "expire": "2026-01-08T10:00:00Z",\n    "user": {\n      "id": 1,\n      "username": "admin",\n      "email": "admin@example.com",\n      "role": "admin"\n    }\n  }\n}\n'})}),"\n",(0,d.jsx)(n.h2,{id:"\u767b\u51fa",children:"\u767b\u51fa"}),"\n",(0,d.jsx)(n.h3,{id:"\u8bf7\u6c42-1",children:"\u8bf7\u6c42"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{children:"POST /api/auth/logout\n"})}),"\n",(0,d.jsx)(n.h3,{id:"\u793a\u4f8b-1",children:"\u793a\u4f8b"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-bash",children:'curl -X POST https://kubepolaris.example.com/api/auth/logout \\\n  -H "Authorization: Bearer <token>"\n'})}),"\n",(0,d.jsx)(n.h3,{id:"\u54cd\u5e94-1",children:"\u54cd\u5e94"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-json",children:'{\n  "code": 200,\n  "message": "success",\n  "data": null\n}\n'})}),"\n",(0,d.jsx)(n.h2,{id:"\u5237\u65b0-token",children:"\u5237\u65b0 Token"}),"\n",(0,d.jsx)(n.h3,{id:"\u8bf7\u6c42-2",children:"\u8bf7\u6c42"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{children:"POST /api/auth/refresh\n"})}),"\n",(0,d.jsx)(n.h3,{id:"\u793a\u4f8b-2",children:"\u793a\u4f8b"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-bash",children:'curl -X POST https://kubepolaris.example.com/api/auth/refresh \\\n  -H "Authorization: Bearer <refresh-token>"\n'})}),"\n",(0,d.jsx)(n.h3,{id:"\u54cd\u5e94-2",children:"\u54cd\u5e94"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-json",children:'{\n  "code": 200,\n  "message": "success",\n  "data": {\n    "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",\n    "expire": "2026-01-08T10:00:00Z"\n  }\n}\n'})}),"\n",(0,d.jsx)(n.h2,{id:"\u5f53\u524d\u7528\u6237\u4fe1\u606f",children:"\u5f53\u524d\u7528\u6237\u4fe1\u606f"}),"\n",(0,d.jsx)(n.h3,{id:"\u8bf7\u6c42-3",children:"\u8bf7\u6c42"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{children:"GET /api/auth/me\n"})}),"\n",(0,d.jsx)(n.h3,{id:"\u793a\u4f8b-3",children:"\u793a\u4f8b"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-bash",children:'curl -X GET https://kubepolaris.example.com/api/auth/me \\\n  -H "Authorization: Bearer <token>"\n'})}),"\n",(0,d.jsx)(n.h3,{id:"\u54cd\u5e94-3",children:"\u54cd\u5e94"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-json",children:'{\n  "code": 200,\n  "message": "success",\n  "data": {\n    "id": 1,\n    "username": "admin",\n    "email": "admin@example.com",\n    "role": "admin",\n    "permissions": [\n      "cluster:view",\n      "cluster:create",\n      "cluster:delete",\n      "workload:view",\n      "workload:edit"\n    ],\n    "createdAt": "2026-01-01T00:00:00Z",\n    "lastLogin": "2026-01-07T10:00:00Z"\n  }\n}\n'})}),"\n",(0,d.jsx)(n.h2,{id:"\u4fee\u6539\u5bc6\u7801",children:"\u4fee\u6539\u5bc6\u7801"}),"\n",(0,d.jsx)(n.h3,{id:"\u8bf7\u6c42-4",children:"\u8bf7\u6c42"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{children:"POST /api/auth/change-password\n"})}),"\n",(0,d.jsx)(n.h3,{id:"\u53c2\u6570-1",children:"\u53c2\u6570"}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"\u5b57\u6bb5"}),(0,d.jsx)(n.th,{children:"\u7c7b\u578b"}),(0,d.jsx)(n.th,{children:"\u5fc5\u586b"}),(0,d.jsx)(n.th,{children:"\u8bf4\u660e"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"oldPassword"}),(0,d.jsx)(n.td,{children:"string"}),(0,d.jsx)(n.td,{children:"\u662f"}),(0,d.jsx)(n.td,{children:"\u65e7\u5bc6\u7801"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"newPassword"}),(0,d.jsx)(n.td,{children:"string"}),(0,d.jsx)(n.td,{children:"\u662f"}),(0,d.jsx)(n.td,{children:"\u65b0\u5bc6\u7801"})]})]})]}),"\n",(0,d.jsx)(n.h3,{id:"\u793a\u4f8b-4",children:"\u793a\u4f8b"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-bash",children:'curl -X POST https://kubepolaris.example.com/api/auth/change-password \\\n  -H "Authorization: Bearer <token>" \\\n  -H "Content-Type: application/json" \\\n  -d \'{\n    "oldPassword": "old123",\n    "newPassword": "new456"\n  }\'\n'})}),"\n",(0,d.jsx)(n.h3,{id:"\u54cd\u5e94-4",children:"\u54cd\u5e94"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-json",children:'{\n  "code": 200,\n  "message": "Password changed successfully",\n  "data": null\n}\n'})}),"\n",(0,d.jsx)(n.h2,{id:"\u9519\u8bef\u7801",children:"\u9519\u8bef\u7801"}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"\u9519\u8bef\u7801"}),(0,d.jsx)(n.th,{children:"\u8bf4\u660e"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"401001"}),(0,d.jsx)(n.td,{children:"\u7528\u6237\u540d\u6216\u5bc6\u7801\u9519\u8bef"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"401002"}),(0,d.jsx)(n.td,{children:"Token \u5df2\u8fc7\u671f"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"401003"}),(0,d.jsx)(n.td,{children:"Token \u65e0\u6548"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"401004"}),(0,d.jsx)(n.td,{children:"\u8d26\u53f7\u5df2\u9501\u5b9a"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"403001"}),(0,d.jsx)(n.td,{children:"\u6743\u9650\u4e0d\u8db3"})]})]})]})]})}function o(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,d.jsx)(n,{...e,children:(0,d.jsx)(h,{...e})}):h(e)}},8453(e,n,s){s.d(n,{R:()=>r,x:()=>a});var i=s(6540);const d={},l=i.createContext(d);function r(e){const n=i.useContext(l);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(d):e.components||d:r(e.components),i.createElement(l.Provider,{value:n},e.children)}}}]);