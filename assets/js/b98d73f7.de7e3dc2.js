"use strict";(globalThis.webpackChunkkubepolaris_docs=globalThis.webpackChunkkubepolaris_docs||[]).push([[435],{5676(e,n,s){s.r(n),s.d(n,{assets:()=>t,contentTitle:()=>c,default:()=>o,frontMatter:()=>r,metadata:()=>d,toc:()=>a});const d=JSON.parse('{"id":"api/clusters","title":"\u96c6\u7fa4 API","description":"\u83b7\u53d6\u96c6\u7fa4\u5217\u8868","source":"@site/docs/api/clusters.md","sourceDirName":"api","slug":"/api/clusters","permalink":"/docs/api/clusters","draft":false,"unlisted":false,"editUrl":"https://github.com/clay-wangzhi/KubePolaris/tree/main/website/docs/api/clusters.md","tags":[],"version":"current","lastUpdatedBy":"clay-wangzhi","lastUpdatedAt":1768448024000,"sidebarPosition":3,"frontMatter":{"sidebar_position":3},"sidebar":"docsSidebar","previous":{"title":"\u8ba4\u8bc1 API","permalink":"/docs/api/authentication"},"next":{"title":"\u5de5\u4f5c\u8d1f\u8f7d API","permalink":"/docs/api/workloads"}}');var l=s(4848),i=s(8453);const r={sidebar_position:3},c="\u96c6\u7fa4 API",t={},a=[{value:"\u83b7\u53d6\u96c6\u7fa4\u5217\u8868",id:"\u83b7\u53d6\u96c6\u7fa4\u5217\u8868",level:2},{value:"\u8bf7\u6c42",id:"\u8bf7\u6c42",level:3},{value:"\u67e5\u8be2\u53c2\u6570",id:"\u67e5\u8be2\u53c2\u6570",level:3},{value:"\u793a\u4f8b",id:"\u793a\u4f8b",level:3},{value:"\u54cd\u5e94",id:"\u54cd\u5e94",level:3},{value:"\u83b7\u53d6\u96c6\u7fa4\u8be6\u60c5",id:"\u83b7\u53d6\u96c6\u7fa4\u8be6\u60c5",level:2},{value:"\u8bf7\u6c42",id:"\u8bf7\u6c42-1",level:3},{value:"\u793a\u4f8b",id:"\u793a\u4f8b-1",level:3},{value:"\u54cd\u5e94",id:"\u54cd\u5e94-1",level:3},{value:"\u521b\u5efa\u96c6\u7fa4",id:"\u521b\u5efa\u96c6\u7fa4",level:2},{value:"\u8bf7\u6c42",id:"\u8bf7\u6c42-2",level:3},{value:"\u53c2\u6570",id:"\u53c2\u6570",level:3},{value:"\u793a\u4f8b",id:"\u793a\u4f8b-2",level:3},{value:"\u54cd\u5e94",id:"\u54cd\u5e94-2",level:3},{value:"\u66f4\u65b0\u96c6\u7fa4",id:"\u66f4\u65b0\u96c6\u7fa4",level:2},{value:"\u8bf7\u6c42",id:"\u8bf7\u6c42-3",level:3},{value:"\u53c2\u6570",id:"\u53c2\u6570-1",level:3},{value:"\u793a\u4f8b",id:"\u793a\u4f8b-3",level:3},{value:"\u5220\u9664\u96c6\u7fa4",id:"\u5220\u9664\u96c6\u7fa4",level:2},{value:"\u8bf7\u6c42",id:"\u8bf7\u6c42-4",level:3},{value:"\u793a\u4f8b",id:"\u793a\u4f8b-4",level:3},{value:"\u54cd\u5e94",id:"\u54cd\u5e94-3",level:3},{value:"\u6d4b\u8bd5\u96c6\u7fa4\u8fde\u63a5",id:"\u6d4b\u8bd5\u96c6\u7fa4\u8fde\u63a5",level:2},{value:"\u8bf7\u6c42",id:"\u8bf7\u6c42-5",level:3},{value:"\u793a\u4f8b",id:"\u793a\u4f8b-5",level:3},{value:"\u54cd\u5e94",id:"\u54cd\u5e94-4",level:3},{value:"\u83b7\u53d6\u96c6\u7fa4\u8d44\u6e90\u7edf\u8ba1",id:"\u83b7\u53d6\u96c6\u7fa4\u8d44\u6e90\u7edf\u8ba1",level:2},{value:"\u8bf7\u6c42",id:"\u8bf7\u6c42-6",level:3},{value:"\u54cd\u5e94",id:"\u54cd\u5e94-5",level:3}];function h(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,i.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.header,{children:(0,l.jsx)(n.h1,{id:"\u96c6\u7fa4-api",children:"\u96c6\u7fa4 API"})}),"\n",(0,l.jsx)(n.h2,{id:"\u83b7\u53d6\u96c6\u7fa4\u5217\u8868",children:"\u83b7\u53d6\u96c6\u7fa4\u5217\u8868"}),"\n",(0,l.jsx)(n.h3,{id:"\u8bf7\u6c42",children:"\u8bf7\u6c42"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"GET /api/clusters\n"})}),"\n",(0,l.jsx)(n.h3,{id:"\u67e5\u8be2\u53c2\u6570",children:"\u67e5\u8be2\u53c2\u6570"}),"\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"\u53c2\u6570"}),(0,l.jsx)(n.th,{children:"\u7c7b\u578b"}),(0,l.jsx)(n.th,{children:"\u8bf4\u660e"})]})}),(0,l.jsxs)(n.tbody,{children:[(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"page"}),(0,l.jsx)(n.td,{children:"int"}),(0,l.jsx)(n.td,{children:"\u9875\u7801\uff0c\u9ed8\u8ba4 1"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"pageSize"}),(0,l.jsx)(n.td,{children:"int"}),(0,l.jsx)(n.td,{children:"\u6bcf\u9875\u6570\u91cf\uff0c\u9ed8\u8ba4 20"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"search"}),(0,l.jsx)(n.td,{children:"string"}),(0,l.jsx)(n.td,{children:"\u641c\u7d22\u5173\u952e\u5b57"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"status"}),(0,l.jsx)(n.td,{children:"string"}),(0,l.jsx)(n.td,{children:"\u72b6\u6001\u7b5b\u9009"})]})]})]}),"\n",(0,l.jsx)(n.h3,{id:"\u793a\u4f8b",children:"\u793a\u4f8b"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:'curl -X GET "https://kubepolaris.example.com/api/clusters?page=1&pageSize=10" \\\n  -H "Authorization: Bearer <token>"\n'})}),"\n",(0,l.jsx)(n.h3,{id:"\u54cd\u5e94",children:"\u54cd\u5e94"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-json",children:'{\n  "code": 200,\n  "data": {\n    "items": [\n      {\n        "id": 1,\n        "name": "production",\n        "apiServer": "https://k8s.example.com:6443",\n        "status": "connected",\n        "version": "v1.28.0",\n        "nodeCount": 5,\n        "createdAt": "2026-01-01T00:00:00Z"\n      }\n    ],\n    "total": 1,\n    "page": 1,\n    "pageSize": 10\n  }\n}\n'})}),"\n",(0,l.jsx)(n.h2,{id:"\u83b7\u53d6\u96c6\u7fa4\u8be6\u60c5",children:"\u83b7\u53d6\u96c6\u7fa4\u8be6\u60c5"}),"\n",(0,l.jsx)(n.h3,{id:"\u8bf7\u6c42-1",children:"\u8bf7\u6c42"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"GET /api/clusters/:id\n"})}),"\n",(0,l.jsx)(n.h3,{id:"\u793a\u4f8b-1",children:"\u793a\u4f8b"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:'curl -X GET https://kubepolaris.example.com/api/clusters/1 \\\n  -H "Authorization: Bearer <token>"\n'})}),"\n",(0,l.jsx)(n.h3,{id:"\u54cd\u5e94-1",children:"\u54cd\u5e94"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-json",children:'{\n  "code": 200,\n  "data": {\n    "id": 1,\n    "name": "production",\n    "description": "\u751f\u4ea7\u73af\u5883\u96c6\u7fa4",\n    "apiServer": "https://k8s.example.com:6443",\n    "status": "connected",\n    "version": "v1.28.0",\n    "nodeCount": 5,\n    "podCount": 120,\n    "namespaceCount": 15,\n    "resources": {\n      "cpu": {\n        "capacity": "40",\n        "used": "25.5",\n        "percentage": 63.75\n      },\n      "memory": {\n        "capacity": "160Gi",\n        "used": "95Gi",\n        "percentage": 59.37\n      }\n    },\n    "createdAt": "2026-01-01T00:00:00Z",\n    "updatedAt": "2026-01-07T10:00:00Z"\n  }\n}\n'})}),"\n",(0,l.jsx)(n.h2,{id:"\u521b\u5efa\u96c6\u7fa4",children:"\u521b\u5efa\u96c6\u7fa4"}),"\n",(0,l.jsx)(n.h3,{id:"\u8bf7\u6c42-2",children:"\u8bf7\u6c42"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"POST /api/clusters\n"})}),"\n",(0,l.jsx)(n.h3,{id:"\u53c2\u6570",children:"\u53c2\u6570"}),"\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"\u5b57\u6bb5"}),(0,l.jsx)(n.th,{children:"\u7c7b\u578b"}),(0,l.jsx)(n.th,{children:"\u5fc5\u586b"}),(0,l.jsx)(n.th,{children:"\u8bf4\u660e"})]})}),(0,l.jsxs)(n.tbody,{children:[(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"name"}),(0,l.jsx)(n.td,{children:"string"}),(0,l.jsx)(n.td,{children:"\u662f"}),(0,l.jsx)(n.td,{children:"\u96c6\u7fa4\u540d\u79f0"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"description"}),(0,l.jsx)(n.td,{children:"string"}),(0,l.jsx)(n.td,{children:"\u5426"}),(0,l.jsx)(n.td,{children:"\u63cf\u8ff0"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"apiServer"}),(0,l.jsx)(n.td,{children:"string"}),(0,l.jsx)(n.td,{children:"\u662f"}),(0,l.jsx)(n.td,{children:"API Server \u5730\u5740"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"kubeConfig"}),(0,l.jsx)(n.td,{children:"string"}),(0,l.jsx)(n.td,{children:"\u5426"}),(0,l.jsx)(n.td,{children:"kubeconfig \u5185\u5bb9 (base64)"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"token"}),(0,l.jsx)(n.td,{children:"string"}),(0,l.jsx)(n.td,{children:"\u5426"}),(0,l.jsx)(n.td,{children:"Token"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"caCert"}),(0,l.jsx)(n.td,{children:"string"}),(0,l.jsx)(n.td,{children:"\u5426"}),(0,l.jsx)(n.td,{children:"CA \u8bc1\u4e66 (base64)"})]})]})]}),"\n",(0,l.jsx)(n.h3,{id:"\u793a\u4f8b-2",children:"\u793a\u4f8b"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:'curl -X POST https://kubepolaris.example.com/api/clusters \\\n  -H "Authorization: Bearer <token>" \\\n  -H "Content-Type: application/json" \\\n  -d \'{\n    "name": "production",\n    "description": "\u751f\u4ea7\u73af\u5883\u96c6\u7fa4",\n    "apiServer": "https://k8s.example.com:6443",\n    "kubeConfig": "YXBpVmVyc2lvbjogdjEK..."\n  }\'\n'})}),"\n",(0,l.jsx)(n.h3,{id:"\u54cd\u5e94-2",children:"\u54cd\u5e94"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-json",children:'{\n  "code": 201,\n  "message": "Cluster created successfully",\n  "data": {\n    "id": 1,\n    "name": "production"\n  }\n}\n'})}),"\n",(0,l.jsx)(n.h2,{id:"\u66f4\u65b0\u96c6\u7fa4",children:"\u66f4\u65b0\u96c6\u7fa4"}),"\n",(0,l.jsx)(n.h3,{id:"\u8bf7\u6c42-3",children:"\u8bf7\u6c42"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"PUT /api/clusters/:id\n"})}),"\n",(0,l.jsx)(n.h3,{id:"\u53c2\u6570-1",children:"\u53c2\u6570"}),"\n",(0,l.jsx)(n.p,{children:"\u540c\u521b\u5efa\u96c6\u7fa4\u3002"}),"\n",(0,l.jsx)(n.h3,{id:"\u793a\u4f8b-3",children:"\u793a\u4f8b"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:'curl -X PUT https://kubepolaris.example.com/api/clusters/1 \\\n  -H "Authorization: Bearer <token>" \\\n  -H "Content-Type: application/json" \\\n  -d \'{\n    "description": "\u66f4\u65b0\u63cf\u8ff0"\n  }\'\n'})}),"\n",(0,l.jsx)(n.h2,{id:"\u5220\u9664\u96c6\u7fa4",children:"\u5220\u9664\u96c6\u7fa4"}),"\n",(0,l.jsx)(n.h3,{id:"\u8bf7\u6c42-4",children:"\u8bf7\u6c42"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"DELETE /api/clusters/:id\n"})}),"\n",(0,l.jsx)(n.h3,{id:"\u793a\u4f8b-4",children:"\u793a\u4f8b"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:'curl -X DELETE https://kubepolaris.example.com/api/clusters/1 \\\n  -H "Authorization: Bearer <token>"\n'})}),"\n",(0,l.jsx)(n.h3,{id:"\u54cd\u5e94-3",children:"\u54cd\u5e94"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-json",children:'{\n  "code": 200,\n  "message": "Cluster deleted successfully",\n  "data": null\n}\n'})}),"\n",(0,l.jsx)(n.h2,{id:"\u6d4b\u8bd5\u96c6\u7fa4\u8fde\u63a5",children:"\u6d4b\u8bd5\u96c6\u7fa4\u8fde\u63a5"}),"\n",(0,l.jsx)(n.h3,{id:"\u8bf7\u6c42-5",children:"\u8bf7\u6c42"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"POST /api/clusters/:id/test\n"})}),"\n",(0,l.jsx)(n.h3,{id:"\u793a\u4f8b-5",children:"\u793a\u4f8b"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:'curl -X POST https://kubepolaris.example.com/api/clusters/1/test \\\n  -H "Authorization: Bearer <token>"\n'})}),"\n",(0,l.jsx)(n.h3,{id:"\u54cd\u5e94-4",children:"\u54cd\u5e94"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-json",children:'{\n  "code": 200,\n  "data": {\n    "connected": true,\n    "version": "v1.28.0",\n    "message": "Connection successful"\n  }\n}\n'})}),"\n",(0,l.jsx)(n.h2,{id:"\u83b7\u53d6\u96c6\u7fa4\u8d44\u6e90\u7edf\u8ba1",children:"\u83b7\u53d6\u96c6\u7fa4\u8d44\u6e90\u7edf\u8ba1"}),"\n",(0,l.jsx)(n.h3,{id:"\u8bf7\u6c42-6",children:"\u8bf7\u6c42"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"GET /api/clusters/:id/stats\n"})}),"\n",(0,l.jsx)(n.h3,{id:"\u54cd\u5e94-5",children:"\u54cd\u5e94"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-json",children:'{\n  "code": 200,\n  "data": {\n    "nodes": {\n      "total": 5,\n      "ready": 5,\n      "notReady": 0\n    },\n    "pods": {\n      "total": 120,\n      "running": 115,\n      "pending": 3,\n      "failed": 2\n    },\n    "deployments": {\n      "total": 25,\n      "available": 24,\n      "unavailable": 1\n    },\n    "resources": {\n      "cpu": {\n        "capacity": "40",\n        "allocatable": "38",\n        "used": "25.5"\n      },\n      "memory": {\n        "capacity": "160Gi",\n        "allocatable": "155Gi",\n        "used": "95Gi"\n      }\n    }\n  }\n}\n'})})]})}function o(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(h,{...e})}):h(e)}},8453(e,n,s){s.d(n,{R:()=>r,x:()=>c});var d=s(6540);const l={},i=d.createContext(l);function r(e){const n=d.useContext(i);return d.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:r(e.components),d.createElement(i.Provider,{value:n},e.children)}}}]);