"use strict";(globalThis.webpackChunkkubepolaris_docs=globalThis.webpackChunkkubepolaris_docs||[]).push([[487],{5721(e,n,l){l.r(n),l.d(n,{assets:()=>a,contentTitle:()=>c,default:()=>t,frontMatter:()=>d,metadata:()=>s,toc:()=>h});const s=JSON.parse('{"id":"admin-guide/troubleshooting","title":"\u6545\u969c\u6392\u67e5","description":"\u672c\u6587\u6863\u63d0\u4f9b KubePolaris \u5e38\u89c1\u95ee\u9898\u7684\u8bca\u65ad\u548c\u89e3\u51b3\u65b9\u6cd5\u3002","source":"@site/docs/admin-guide/troubleshooting.md","sourceDirName":"admin-guide","slug":"/admin-guide/troubleshooting","permalink":"/en/docs/admin-guide/troubleshooting","draft":false,"unlisted":false,"editUrl":"https://github.com/clay-wangzhi/KubePolaris/tree/main/website/docs/admin-guide/troubleshooting.md","tags":[],"version":"current","lastUpdatedBy":"clay-wangzhi","lastUpdatedAt":1768448024000,"sidebarPosition":5,"frontMatter":{"sidebar_position":5},"sidebar":"docsSidebar","previous":{"title":"\u5907\u4efd\u6062\u590d","permalink":"/en/docs/admin-guide/backup-restore"},"next":{"title":"ArgoCD \u96c6\u6210","permalink":"/en/docs/plugins/argocd"}}');var i=l(4848),r=l(8453);const d={sidebar_position:5},c="\u6545\u969c\u6392\u67e5",a={},h=[{value:"\u8bca\u65ad\u5de5\u5177",id:"\u8bca\u65ad\u5de5\u5177",level:2},{value:"\u5065\u5eb7\u68c0\u67e5",id:"\u5065\u5eb7\u68c0\u67e5",level:3},{value:"\u65e5\u5fd7\u67e5\u770b",id:"\u65e5\u5fd7\u67e5\u770b",level:3},{value:"\u8d44\u6e90\u68c0\u67e5",id:"\u8d44\u6e90\u68c0\u67e5",level:3},{value:"\u5e38\u89c1\u95ee\u9898",id:"\u5e38\u89c1\u95ee\u9898",level:2},{value:"\u670d\u52a1\u65e0\u6cd5\u542f\u52a8",id:"\u670d\u52a1\u65e0\u6cd5\u542f\u52a8",level:3},{value:"\u75c7\u72b6",id:"\u75c7\u72b6",level:4},{value:"\u8bca\u65ad",id:"\u8bca\u65ad",level:4},{value:"\u5e38\u89c1\u539f\u56e0",id:"\u5e38\u89c1\u539f\u56e0",level:4},{value:"\u89e3\u51b3\u65b9\u6848",id:"\u89e3\u51b3\u65b9\u6848",level:4},{value:"\u767b\u5f55\u5931\u8d25",id:"\u767b\u5f55\u5931\u8d25",level:3},{value:"\u75c7\u72b6",id:"\u75c7\u72b6-1",level:4},{value:"\u8bca\u65ad",id:"\u8bca\u65ad-1",level:4},{value:"\u5e38\u89c1\u539f\u56e0",id:"\u5e38\u89c1\u539f\u56e0-1",level:4},{value:"\u65e0\u6cd5\u8fde\u63a5\u96c6\u7fa4",id:"\u65e0\u6cd5\u8fde\u63a5\u96c6\u7fa4",level:3},{value:"\u75c7\u72b6",id:"\u75c7\u72b6-2",level:4},{value:"\u8bca\u65ad",id:"\u8bca\u65ad-2",level:4},{value:"\u5e38\u89c1\u539f\u56e0",id:"\u5e38\u89c1\u539f\u56e0-2",level:4},{value:"\u89e3\u51b3\u65b9\u6848",id:"\u89e3\u51b3\u65b9\u6848-1",level:4},{value:"\u7ec8\u7aef\u8fde\u63a5\u5931\u8d25",id:"\u7ec8\u7aef\u8fde\u63a5\u5931\u8d25",level:3},{value:"\u75c7\u72b6",id:"\u75c7\u72b6-3",level:4},{value:"\u8bca\u65ad",id:"\u8bca\u65ad-3",level:4},{value:"\u5e38\u89c1\u539f\u56e0",id:"\u5e38\u89c1\u539f\u56e0-3",level:4},{value:"\u9875\u9762\u52a0\u8f7d\u6162",id:"\u9875\u9762\u52a0\u8f7d\u6162",level:3},{value:"\u75c7\u72b6",id:"\u75c7\u72b6-4",level:4},{value:"\u8bca\u65ad",id:"\u8bca\u65ad-4",level:4},{value:"\u5e38\u89c1\u539f\u56e0",id:"\u5e38\u89c1\u539f\u56e0-4",level:4},{value:"\u76d1\u63a7\u6570\u636e\u7f3a\u5931",id:"\u76d1\u63a7\u6570\u636e\u7f3a\u5931",level:3},{value:"\u75c7\u72b6",id:"\u75c7\u72b6-5",level:4},{value:"\u8bca\u65ad",id:"\u8bca\u65ad-5",level:4},{value:"\u5e38\u89c1\u539f\u56e0",id:"\u5e38\u89c1\u539f\u56e0-5",level:4},{value:"\u6570\u636e\u5e93\u95ee\u9898",id:"\u6570\u636e\u5e93\u95ee\u9898",level:3},{value:"\u75c7\u72b6",id:"\u75c7\u72b6-6",level:4},{value:"\u8bca\u65ad",id:"\u8bca\u65ad-6",level:4},{value:"\u5e38\u89c1\u539f\u56e0",id:"\u5e38\u89c1\u539f\u56e0-6",level:4},{value:"\u65e5\u5fd7\u5206\u6790",id:"\u65e5\u5fd7\u5206\u6790",level:2},{value:"\u5e38\u89c1\u9519\u8bef\u65e5\u5fd7",id:"\u5e38\u89c1\u9519\u8bef\u65e5\u5fd7",level:3},{value:"\u65e5\u5fd7\u7ea7\u522b\u8c03\u6574",id:"\u65e5\u5fd7\u7ea7\u522b\u8c03\u6574",level:3},{value:"\u6027\u80fd\u4f18\u5316",id:"\u6027\u80fd\u4f18\u5316",level:2},{value:"\u6570\u636e\u5e93\u4f18\u5316",id:"\u6570\u636e\u5e93\u4f18\u5316",level:3},{value:"\u5e94\u7528\u4f18\u5316",id:"\u5e94\u7528\u4f18\u5316",level:3},{value:"\u83b7\u53d6\u5e2e\u52a9",id:"\u83b7\u53d6\u5e2e\u52a9",level:2},{value:"\u6536\u96c6\u4fe1\u606f",id:"\u6536\u96c6\u4fe1\u606f",level:3},{value:"\u63d0\u4ea4 Issue",id:"\u63d0\u4ea4-issue",level:3},{value:"\u4e0b\u4e00\u6b65",id:"\u4e0b\u4e00\u6b65",level:2}];function o(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"\u6545\u969c\u6392\u67e5",children:"\u6545\u969c\u6392\u67e5"})}),"\n",(0,i.jsx)(n.p,{children:"\u672c\u6587\u6863\u63d0\u4f9b KubePolaris \u5e38\u89c1\u95ee\u9898\u7684\u8bca\u65ad\u548c\u89e3\u51b3\u65b9\u6cd5\u3002"}),"\n",(0,i.jsx)(n.h2,{id:"\u8bca\u65ad\u5de5\u5177",children:"\u8bca\u65ad\u5de5\u5177"}),"\n",(0,i.jsx)(n.h3,{id:"\u5065\u5eb7\u68c0\u67e5",children:"\u5065\u5eb7\u68c0\u67e5"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'# API \u5065\u5eb7\u68c0\u67e5\ncurl http://localhost:8080/api/health\n\n# \u9884\u671f\u54cd\u5e94\n{\n  "status": "healthy",\n  "database": "connected",\n  "version": "1.0.0",\n  "uptime": "10h30m"\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"\u65e5\u5fd7\u67e5\u770b",children:"\u65e5\u5fd7\u67e5\u770b"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Docker\ndocker logs kubepolaris-backend -f --tail 100\n\n# Kubernetes\nkubectl logs -f deployment/kubepolaris-backend -n kubepolaris\n\n# \u67e5\u770b\u9519\u8bef\u65e5\u5fd7\nkubectl logs deployment/kubepolaris-backend -n kubepolaris | grep -i error\n"})}),"\n",(0,i.jsx)(n.h3,{id:"\u8d44\u6e90\u68c0\u67e5",children:"\u8d44\u6e90\u68c0\u67e5"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Pod \u72b6\u6001\nkubectl get pods -n kubepolaris\n\n# \u4e8b\u4ef6\nkubectl get events -n kubepolaris --sort-by='.lastTimestamp'\n\n# \u8d44\u6e90\u4f7f\u7528\nkubectl top pods -n kubepolaris\n"})}),"\n",(0,i.jsx)(n.h2,{id:"\u5e38\u89c1\u95ee\u9898",children:"\u5e38\u89c1\u95ee\u9898"}),"\n",(0,i.jsx)(n.h3,{id:"\u670d\u52a1\u65e0\u6cd5\u542f\u52a8",children:"\u670d\u52a1\u65e0\u6cd5\u542f\u52a8"}),"\n",(0,i.jsx)(n.h4,{id:"\u75c7\u72b6",children:"\u75c7\u72b6"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Pod \u72b6\u6001 CrashLoopBackOff"}),"\n",(0,i.jsx)(n.li,{children:"\u65e5\u5fd7\u663e\u793a\u542f\u52a8\u9519\u8bef"}),"\n"]}),"\n",(0,i.jsx)(n.h4,{id:"\u8bca\u65ad",children:"\u8bca\u65ad"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# \u67e5\u770b Pod \u72b6\u6001\nkubectl describe pod -l app=kubepolaris -n kubepolaris\n\n# \u67e5\u770b\u65e5\u5fd7\nkubectl logs -f deployment/kubepolaris-backend -n kubepolaris --previous\n"})}),"\n",(0,i.jsx)(n.h4,{id:"\u5e38\u89c1\u539f\u56e0",children:"\u5e38\u89c1\u539f\u56e0"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"1. \u914d\u7f6e\u6587\u4ef6\u9519\u8bef"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# \u9a8c\u8bc1\u914d\u7f6e\nkubectl get configmap kubepolaris-config -n kubepolaris -o yaml\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"2. \u6570\u636e\u5e93\u8fde\u63a5\u5931\u8d25"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# \u6d4b\u8bd5\u6570\u636e\u5e93\u8fde\u63a5\nkubectl run -it --rm mysql-client --image=mysql:8.0 -- \\\n  mysql -h kubepolaris-mysql -u root -p\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"3. \u7aef\u53e3\u88ab\u5360\u7528"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# \u68c0\u67e5\u7aef\u53e3\nnetstat -tlnp | grep 8080\n"})}),"\n",(0,i.jsx)(n.h4,{id:"\u89e3\u51b3\u65b9\u6848",children:"\u89e3\u51b3\u65b9\u6848"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u4fee\u6b63\u914d\u7f6e\u6587\u4ef6\u8bed\u6cd5"}),"\n",(0,i.jsx)(n.li,{children:"\u786e\u8ba4\u6570\u636e\u5e93\u5730\u5740\u548c\u51ed\u636e"}),"\n",(0,i.jsx)(n.li,{children:"\u66f4\u6362\u6216\u91ca\u653e\u7aef\u53e3"}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"\u767b\u5f55\u5931\u8d25",children:"\u767b\u5f55\u5931\u8d25"}),"\n",(0,i.jsx)(n.h4,{id:"\u75c7\u72b6-1",children:"\u75c7\u72b6"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u65e0\u6cd5\u767b\u5f55"}),"\n",(0,i.jsx)(n.li,{children:"\u63d0\u793a\u7528\u6237\u540d\u6216\u5bc6\u7801\u9519\u8bef"}),"\n"]}),"\n",(0,i.jsx)(n.h4,{id:"\u8bca\u65ad-1",children:"\u8bca\u65ad"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# \u67e5\u770b\u8ba4\u8bc1\u65e5\u5fd7\nkubectl logs deployment/kubepolaris-backend -n kubepolaris | grep -i auth\n"})}),"\n",(0,i.jsx)(n.h4,{id:"\u5e38\u89c1\u539f\u56e0-1",children:"\u5e38\u89c1\u539f\u56e0"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"1. \u5bc6\u7801\u9519\u8bef"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# \u91cd\u7f6e\u7ba1\u7406\u5458\u5bc6\u7801\nkubectl exec -it deployment/kubepolaris-backend -n kubepolaris -- \\\n  ./kubepolaris-backend reset-password --user admin --password newpass\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"2. \u8d26\u53f7\u9501\u5b9a"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u591a\u6b21\u9519\u8bef\u767b\u5f55\u5bfc\u81f4\u9501\u5b9a"}),"\n",(0,i.jsx)(n.li,{children:"\u7b49\u5f85\u9501\u5b9a\u65f6\u95f4\u8fc7\u671f\u6216\u624b\u52a8\u89e3\u9501"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"3. JWT \u914d\u7f6e\u95ee\u9898"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# \u68c0\u67e5 JWT \u914d\u7f6e\nkubectl get secret kubepolaris-secrets -n kubepolaris -o yaml\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"\u65e0\u6cd5\u8fde\u63a5\u96c6\u7fa4",children:"\u65e0\u6cd5\u8fde\u63a5\u96c6\u7fa4"}),"\n",(0,i.jsx)(n.h4,{id:"\u75c7\u72b6-2",children:"\u75c7\u72b6"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u6dfb\u52a0\u96c6\u7fa4\u5931\u8d25"}),"\n",(0,i.jsx)(n.li,{children:"\u96c6\u7fa4\u72b6\u6001\u663e\u793a\u5f02\u5e38"}),"\n"]}),"\n",(0,i.jsx)(n.h4,{id:"\u8bca\u65ad-2",children:"\u8bca\u65ad"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# \u4ece KubePolaris Pod \u6d4b\u8bd5\u8fde\u63a5\nkubectl exec -it deployment/kubepolaris-backend -n kubepolaris -- \\\n  curl -k https://api-server:6443/healthz\n"})}),"\n",(0,i.jsx)(n.h4,{id:"\u5e38\u89c1\u539f\u56e0-2",children:"\u5e38\u89c1\u539f\u56e0"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"1. \u7f51\u7edc\u4e0d\u901a"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# \u68c0\u67e5\u7f51\u7edc\nkubectl exec -it deployment/kubepolaris-backend -n kubepolaris -- \\\n  ping api-server-ip\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"2. \u8ba4\u8bc1\u914d\u7f6e\u9519\u8bef"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"kubeconfig \u683c\u5f0f\u9519\u8bef"}),"\n",(0,i.jsx)(n.li,{children:"Token \u8fc7\u671f"}),"\n",(0,i.jsx)(n.li,{children:"\u8bc1\u4e66\u4e0d\u5339\u914d"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"3. \u9632\u706b\u5899\u963b\u6b62"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u786e\u4fdd 6443 \u7aef\u53e3\u5f00\u653e"}),"\n"]}),"\n",(0,i.jsx)(n.h4,{id:"\u89e3\u51b3\u65b9\u6848-1",children:"\u89e3\u51b3\u65b9\u6848"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'# \u9a8c\u8bc1 kubeconfig\nkubectl --kubeconfig=your-config.yaml get nodes\n\n# \u6d4b\u8bd5 Token\ncurl -H "Authorization: Bearer $TOKEN" -k https://api-server:6443/api/v1/nodes\n'})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"\u7ec8\u7aef\u8fde\u63a5\u5931\u8d25",children:"\u7ec8\u7aef\u8fde\u63a5\u5931\u8d25"}),"\n",(0,i.jsx)(n.h4,{id:"\u75c7\u72b6-3",children:"\u75c7\u72b6"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Pod \u7ec8\u7aef\u65e0\u6cd5\u6253\u5f00"}),"\n",(0,i.jsx)(n.li,{children:"WebSocket \u8fde\u63a5\u5931\u8d25"}),"\n"]}),"\n",(0,i.jsx)(n.h4,{id:"\u8bca\u65ad-3",children:"\u8bca\u65ad"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# \u68c0\u67e5 WebSocket \u670d\u52a1\nkubectl logs deployment/kubepolaris-backend -n kubepolaris | grep -i websocket\n\n# \u6d4f\u89c8\u5668\u63a7\u5236\u53f0\u68c0\u67e5\n# \u6253\u5f00\u5f00\u53d1\u8005\u5de5\u5177 \u2192 Network \u2192 WS\n"})}),"\n",(0,i.jsx)(n.h4,{id:"\u5e38\u89c1\u539f\u56e0-3",children:"\u5e38\u89c1\u539f\u56e0"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"1. Nginx/Ingress \u4e0d\u652f\u6301 WebSocket"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-nginx",children:'# \u786e\u4fdd Nginx \u914d\u7f6e\nlocation /ws/ {\n    proxy_http_version 1.1;\n    proxy_set_header Upgrade $http_upgrade;\n    proxy_set_header Connection "upgrade";\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"2. \u8d85\u65f6\u914d\u7f6e"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-nginx",children:"proxy_read_timeout 3600s;\nproxy_send_timeout 3600s;\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"3. Pod \u4e0d\u652f\u6301 exec"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# \u68c0\u67e5 RBAC\nkubectl auth can-i create pods/exec -n default\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"\u9875\u9762\u52a0\u8f7d\u6162",children:"\u9875\u9762\u52a0\u8f7d\u6162"}),"\n",(0,i.jsx)(n.h4,{id:"\u75c7\u72b6-4",children:"\u75c7\u72b6"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u9875\u9762\u54cd\u5e94\u7f13\u6162"}),"\n",(0,i.jsx)(n.li,{children:"API \u8bf7\u6c42\u8d85\u65f6"}),"\n"]}),"\n",(0,i.jsx)(n.h4,{id:"\u8bca\u65ad-4",children:"\u8bca\u65ad"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# \u68c0\u67e5 API \u54cd\u5e94\u65f6\u95f4\ntime curl http://localhost:8080/api/clusters\n\n# \u68c0\u67e5\u8d44\u6e90\u4f7f\u7528\nkubectl top pods -n kubepolaris\n"})}),"\n",(0,i.jsx)(n.h4,{id:"\u5e38\u89c1\u539f\u56e0-4",children:"\u5e38\u89c1\u539f\u56e0"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"1. \u8d44\u6e90\u4e0d\u8db3"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"# \u589e\u52a0\u8d44\u6e90\u9650\u5236\nresources:\n  limits:\n    cpu: 4000m\n    memory: 4Gi\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"2. \u6570\u636e\u5e93\u6162\u67e5\u8be2"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sql",children:"-- \u68c0\u67e5\u6162\u67e5\u8be2\nSHOW PROCESSLIST;\nSHOW STATUS LIKE 'Slow_queries';\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"3. \u7f51\u7edc\u5ef6\u8fdf"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u68c0\u67e5\u5230 API Server \u7684\u7f51\u7edc\u5ef6\u8fdf"}),"\n",(0,i.jsx)(n.li,{children:"\u8003\u8651\u5c31\u8fd1\u90e8\u7f72"}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"\u76d1\u63a7\u6570\u636e\u7f3a\u5931",children:"\u76d1\u63a7\u6570\u636e\u7f3a\u5931"}),"\n",(0,i.jsx)(n.h4,{id:"\u75c7\u72b6-5",children:"\u75c7\u72b6"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u76d1\u63a7\u56fe\u8868\u4e0d\u663e\u793a"}),"\n",(0,i.jsx)(n.li,{children:"Prometheus/Grafana \u8fde\u63a5\u5931\u8d25"}),"\n"]}),"\n",(0,i.jsx)(n.h4,{id:"\u8bca\u65ad-5",children:"\u8bca\u65ad"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'# \u6d4b\u8bd5 Prometheus \u8fde\u63a5\ncurl http://prometheus:9090/api/v1/query?query=up\n\n# \u6d4b\u8bd5 Grafana \u8fde\u63a5\ncurl -H "Authorization: Bearer $API_KEY" http://grafana:3000/api/org\n'})}),"\n",(0,i.jsx)(n.h4,{id:"\u5e38\u89c1\u539f\u56e0-5",children:"\u5e38\u89c1\u539f\u56e0"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"1. \u5730\u5740\u914d\u7f6e\u9519\u8bef"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u68c0\u67e5\u7cfb\u7edf\u8bbe\u7f6e\u4e2d\u7684\u5730\u5740\u914d\u7f6e"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"2. \u8ba4\u8bc1\u5931\u8d25"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Grafana API Key \u8fc7\u671f"}),"\n",(0,i.jsx)(n.li,{children:"\u6743\u9650\u4e0d\u8db3"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"3. \u7f51\u7edc\u95ee\u9898"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u4ece KubePolaris Pod \u65e0\u6cd5\u8bbf\u95ee\u76d1\u63a7\u670d\u52a1"}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"\u6570\u636e\u5e93\u95ee\u9898",children:"\u6570\u636e\u5e93\u95ee\u9898"}),"\n",(0,i.jsx)(n.h4,{id:"\u75c7\u72b6-6",children:"\u75c7\u72b6"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u6570\u636e\u5e93\u8fde\u63a5\u9519\u8bef"}),"\n",(0,i.jsx)(n.li,{children:"\u6570\u636e\u4e0d\u4e00\u81f4"}),"\n"]}),"\n",(0,i.jsx)(n.h4,{id:"\u8bca\u65ad-6",children:"\u8bca\u65ad"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'# \u68c0\u67e5\u6570\u636e\u5e93\u72b6\u6001\nmysql -h mysql-host -u kubepolaris -p -e "SHOW STATUS"\n\n# \u68c0\u67e5\u8fde\u63a5\u6570\nmysql -h mysql-host -u kubepolaris -p -e "SHOW PROCESSLIST"\n'})}),"\n",(0,i.jsx)(n.h4,{id:"\u5e38\u89c1\u539f\u56e0-6",children:"\u5e38\u89c1\u539f\u56e0"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"1. \u8fde\u63a5\u6c60\u8017\u5c3d"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"# \u589e\u52a0\u8fde\u63a5\u6c60\ndatabase:\n  max_idle_conns: 20\n  max_open_conns: 200\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"2. \u9501\u7b49\u5f85\u8d85\u65f6"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sql",children:"-- \u68c0\u67e5\u9501\nSHOW ENGINE INNODB STATUS;\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"3. \u78c1\u76d8\u7a7a\u95f4\u4e0d\u8db3"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# \u68c0\u67e5\u78c1\u76d8\ndf -h\n"})}),"\n",(0,i.jsx)(n.h2,{id:"\u65e5\u5fd7\u5206\u6790",children:"\u65e5\u5fd7\u5206\u6790"}),"\n",(0,i.jsx)(n.h3,{id:"\u5e38\u89c1\u9519\u8bef\u65e5\u5fd7",children:"\u5e38\u89c1\u9519\u8bef\u65e5\u5fd7"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'# \u6570\u636e\u5e93\u8fde\u63a5\u9519\u8bef\ndial tcp mysql:3306: connect: connection refused\n\n# \u8ba4\u8bc1\u9519\u8bef\ninvalid token: signature is invalid\n\n# Kubernetes \u8fde\u63a5\u9519\u8bef\nunable to load root certificates\n\n# \u6743\u9650\u9519\u8bef\nforbidden: User "system:serviceaccount:..." cannot get resource\n'})}),"\n",(0,i.jsx)(n.h3,{id:"\u65e5\u5fd7\u7ea7\u522b\u8c03\u6574",children:"\u65e5\u5fd7\u7ea7\u522b\u8c03\u6574"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"# \u4e34\u65f6\u5f00\u542f debug \u65e5\u5fd7\nlog:\n  level: debug\n"})}),"\n",(0,i.jsx)(n.h2,{id:"\u6027\u80fd\u4f18\u5316",children:"\u6027\u80fd\u4f18\u5316"}),"\n",(0,i.jsx)(n.h3,{id:"\u6570\u636e\u5e93\u4f18\u5316",children:"\u6570\u636e\u5e93\u4f18\u5316"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sql",children:"-- \u5206\u6790\u6162\u67e5\u8be2\nSET profiling = 1;\nSELECT * FROM clusters;\nSHOW PROFILES;\n\n-- \u6dfb\u52a0\u7d22\u5f15\nCREATE INDEX idx_cluster_status ON clusters(status);\n"})}),"\n",(0,i.jsx)(n.h3,{id:"\u5e94\u7528\u4f18\u5316",children:"\u5e94\u7528\u4f18\u5316"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"# \u8c03\u6574\u8fde\u63a5\u6c60\ndatabase:\n  max_idle_conns: 50\n  max_open_conns: 200\n  conn_max_lifetime: 3600\n\n# \u8c03\u6574 K8s \u5ba2\u6237\u7aef\nkubernetes:\n  qps: 100\n  burst: 200\n"})}),"\n",(0,i.jsx)(n.h2,{id:"\u83b7\u53d6\u5e2e\u52a9",children:"\u83b7\u53d6\u5e2e\u52a9"}),"\n",(0,i.jsx)(n.h3,{id:"\u6536\u96c6\u4fe1\u606f",children:"\u6536\u96c6\u4fe1\u606f"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# \u6536\u96c6\u8bca\u65ad\u4fe1\u606f\nkubectl get pods -n kubepolaris -o wide\nkubectl get events -n kubepolaris\nkubectl logs deployment/kubepolaris-backend -n kubepolaris --tail=1000 > backend.log\nkubectl describe pod -l app=kubepolaris -n kubepolaris > pod-describe.txt\n"})}),"\n",(0,i.jsx)(n.h3,{id:"\u63d0\u4ea4-issue",children:"\u63d0\u4ea4 Issue"}),"\n",(0,i.jsxs)(n.p,{children:["\u8bbf\u95ee ",(0,i.jsx)(n.a,{href:"https://github.com/clay-wangzhi/KubePolaris/issues",children:"GitHub Issues"})," \u5e76\u63d0\u4f9b\uff1a"]}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"KubePolaris \u7248\u672c"}),"\n",(0,i.jsx)(n.li,{children:"\u90e8\u7f72\u65b9\u5f0f"}),"\n",(0,i.jsx)(n.li,{children:"\u95ee\u9898\u63cf\u8ff0"}),"\n",(0,i.jsx)(n.li,{children:"\u590d\u73b0\u6b65\u9aa4"}),"\n",(0,i.jsx)(n.li,{children:"\u9519\u8bef\u65e5\u5fd7"}),"\n",(0,i.jsx)(n.li,{children:"\u73af\u5883\u4fe1\u606f"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"\u4e0b\u4e00\u6b65",children:"\u4e0b\u4e00\u6b65"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"./deployment",children:"\u90e8\u7f72\u6307\u5357"})," - \u6b63\u786e\u90e8\u7f72"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"./security",children:"\u5b89\u5168\u52a0\u56fa"})," - \u5b89\u5168\u914d\u7f6e"]}),"\n"]})]})}function t(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(o,{...e})}):o(e)}},8453(e,n,l){l.d(n,{R:()=>d,x:()=>c});var s=l(6540);const i={},r=s.createContext(i);function d(e){const n=s.useContext(r);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:d(e.components),s.createElement(r.Provider,{value:n},e.children)}}}]);